{"version":3,"file":"ej2-file-utils.min.js","sources":["../../src/encoding.js","../../src/save.js","../../src/xml-writer.js","../../src/stream-writer.js"],"sourcesContent":["/**\n * Encoding class: Contains the details about encoding type, whether to write a Unicode byte order mark (BOM).\n * ```typescript\n * let encoding : Encoding = new Encoding();\n * encoding.type = 'Utf8';\n * encoding.getBytes('Encoding', 0, 5);\n * ```\n */\nvar Encoding = /** @class */ (function () {\n    /**\n     * Initializes a new instance of the Encoding class. A parameter specifies whether to write a Unicode byte order mark.\n     * @param {boolean} [includeBom] - True to specify that a Unicode byte order mark is written; otherwise, false.\n     */\n    function Encoding(includeBom) {\n        this.emitBOM = true;\n        this.encodingType = 'Ansi';\n        this.initBOM(includeBom);\n    }\n    Object.defineProperty(Encoding.prototype, \"includeBom\", {\n        /**\n         * Gets a value indicating whether to write a Unicode byte order mark.\n         * @returns {boolean} True to specify that a Unicode byte order mark is written; otherwise, false.\n         */\n        get: function () {\n            return this.emitBOM;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Encoding.prototype, \"type\", {\n        /**\n         * Gets the encoding type.\n         * @returns {EncodingType} The current encoding type.\n         */\n        get: function () {\n            return this.encodingType;\n        },\n        /**\n         * Sets the encoding type.\n         * @param {EncodingType} value - The encoding type to set.\n         */\n        set: function (value) {\n            this.encodingType = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Initialize the includeBom to emit BOM or not.\n     * @param {boolean} includeBom - Indicates whether to emit a BOM.\n     * @returns {void} Nothing is returned.\n     */\n    Encoding.prototype.initBOM = function (includeBom) {\n        if (includeBom === undefined || includeBom === null) {\n            this.emitBOM = true;\n        }\n        else {\n            this.emitBOM = includeBom;\n        }\n    };\n    /**\n     * Calculates the number of bytes produced by encoding the characters in the specified string\n     * @param  {string} chars - The string containing the set of characters to encode\n     * @returns {number} - The number of bytes produced by encoding the specified characters\n     */\n    Encoding.prototype.getByteCount = function (chars) {\n        var byteCount = 0;\n        validateNullOrUndefined(chars, 'string');\n        if (chars === '') {\n            var byte = this.utf8Len(chars.charCodeAt(0));\n            return byte;\n        }\n        if (this.type === null || this.type === undefined) {\n            this.type = 'Ansi';\n        }\n        return this.getByteCountInternal(chars, 0, chars.length);\n    };\n    /**\n     * Returns the number of bytes required to represent a character in UTF-8.\n     * @param {number} codePoint - The Unicode code point of the character.\n     * @returns {number} The number of bytes needed for the given code point.\n     */\n    Encoding.prototype.utf8Len = function (codePoint) {\n        var bytes = codePoint <= 0x7F ? 1 :\n            codePoint <= 0x7FF ? 2 :\n                codePoint <= 0xFFFF ? 3 :\n                    codePoint <= 0x1FFFFF ? 4 : 0;\n        return bytes;\n    };\n    /**\n     * Determines if the given code unit is a high surrogate.\n     * For 4-byte characters, returns true; otherwise, false.\n     * @param {number} codeUnit - The Unicode code unit to check.\n     * @returns {boolean} True if the code unit is a high surrogate; otherwise, false.\n     */\n    Encoding.prototype.isHighSurrogate = function (codeUnit) {\n        return codeUnit >= 0xD800 && codeUnit <= 0xDBFF;\n    };\n    /**\n     * Generates the code point from a surrogate pair for a 4-byte character.\n     * @param {number} highCodeUnit - The high surrogate code unit.\n     * @param {number} lowCodeUnit - The low surrogate code unit.\n     * @returns {number} The combined Unicode code point.\n     */\n    Encoding.prototype.toCodepoint = function (highCodeUnit, lowCodeUnit) {\n        highCodeUnit = (0x3FF & highCodeUnit) << 10;\n        var u = highCodeUnit | (0x3FF & lowCodeUnit);\n        return u + 0x10000;\n    };\n    /**\n     * Gets the byte count for a specific range of characters.\n     * @param {string} chars - The string containing characters.\n     * @param {number} charIndex - The starting index of the character range.\n     * @param {number} charCount - The number of characters to process.\n     * @returns {number} The total byte count for the specified characters.\n     */\n    Encoding.prototype.getByteCountInternal = function (chars, charIndex, charCount) {\n        var byteCount = 0;\n        if (this.encodingType === 'Utf8' || this.encodingType === 'Unicode') {\n            var isUtf8 = this.encodingType === 'Utf8';\n            for (var i = 0; i < charCount; i++) {\n                var charCode = chars.charCodeAt(isUtf8 ? charIndex : charIndex++);\n                if (this.isHighSurrogate(charCode)) {\n                    if (isUtf8) {\n                        var high = charCode;\n                        var low = chars.charCodeAt(++charIndex);\n                        byteCount += this.utf8Len(this.toCodepoint(high, low));\n                    }\n                    else {\n                        byteCount += 4;\n                        ++i;\n                    }\n                }\n                else {\n                    if (isUtf8) {\n                        byteCount += this.utf8Len(charCode);\n                    }\n                    else {\n                        byteCount += 2;\n                    }\n                }\n                if (isUtf8) {\n                    charIndex++;\n                }\n            }\n            return byteCount;\n        }\n        else {\n            byteCount = charCount;\n            return byteCount;\n        }\n    };\n    /**\n     * Encodes a set of characters from the specified string into the ArrayBuffer.\n     * @param {string} s - The string containing the set of characters to encode.\n     * @param {number} charIndex - The index of the first character to encode.\n     * @param {number} charCount - The number of characters to encode.\n     * @returns {ArrayBuffer} The ArrayBuffer that contains the resulting sequence of bytes.\n     */\n    Encoding.prototype.getBytes = function (s, charIndex, charCount) {\n        validateNullOrUndefined(s, 'string');\n        validateNullOrUndefined(charIndex, 'charIndex');\n        validateNullOrUndefined(charCount, 'charCount');\n        if (charIndex < 0 || charCount < 0) {\n            throw new RangeError('Argument Out Of Range Exception: charIndex or charCount is less than zero');\n        }\n        if (s.length - charIndex < charCount) {\n            throw new RangeError('Argument Out Of Range Exception: charIndex and charCount do not denote a valid range in string');\n        }\n        var bytes;\n        if (s === '') {\n            bytes = new ArrayBuffer(0);\n            return bytes;\n        }\n        if (this.type === null || this.type === undefined) {\n            this.type = 'Ansi';\n        }\n        var byteCount = this.getByteCountInternal(s, charIndex, charCount);\n        switch (this.type) {\n            case 'Utf8':\n                bytes = this.getBytesOfUtf8Encoding(byteCount, s, charIndex, charCount);\n                return bytes;\n            case 'Unicode':\n                bytes = this.getBytesOfUnicodeEncoding(byteCount, s, charIndex, charCount);\n                return bytes;\n            default:\n                bytes = this.getBytesOfAnsiEncoding(byteCount, s, charIndex, charCount);\n                return bytes;\n        }\n    };\n    /**\n     * Decodes a sequence of bytes from the specified ArrayBuffer into a string.\n     * @param {ArrayBuffer} bytes - The ArrayBuffer containing the sequence of bytes to decode.\n     * @param {number} index - The index of the first byte to decode.\n     * @param {number} count - The number of bytes to decode.\n     * @returns {string} The string that contains the resulting set of characters.\n     */\n    Encoding.prototype.getString = function (bytes, index, count) {\n        validateNullOrUndefined(bytes, 'bytes');\n        validateNullOrUndefined(index, 'index');\n        validateNullOrUndefined(count, 'count');\n        if (index < 0 || count < 0) {\n            throw new RangeError('Argument Out Of Range Exception: index or count is less than zero');\n        }\n        if (bytes.byteLength - index < count) {\n            throw new RangeError('Argument Out Of Range Exception: index and count do not denote a valid range in bytes');\n        }\n        if (bytes.byteLength === 0 || count === 0) {\n            return '';\n        }\n        if (this.type === null || this.type === undefined) {\n            this.type = 'Ansi';\n        }\n        var out = '';\n        var byteCal = new Uint8Array(bytes);\n        switch (this.type) {\n            case 'Utf8': {\n                var s = this.getStringOfUtf8Encoding(byteCal, index, count);\n                return s;\n            }\n            case 'Unicode': {\n                var byteUnicode = new Uint16Array(bytes);\n                out = this.getStringofUnicodeEncoding(byteUnicode, index, count);\n                return out;\n            }\n            default: {\n                var j = index;\n                // tslint:disable-next-line:typedef\n                var arr = byteCal;\n                for (var i = 0; i < count; i++) {\n                    var c = arr[j]; // eslint-disable-line security/detect-object-injection\n                    out += String.fromCharCode(c);\n                    j++;\n                }\n                return out;\n            }\n        }\n    };\n    Encoding.prototype.getBytesOfAnsiEncoding = function (byteCount, s, charIndex, charCount) {\n        var bytes = new ArrayBuffer(byteCount);\n        var bufview = new Uint8Array(bytes);\n        var k = 0;\n        for (var i = 0; i < charCount; i++) {\n            var charcode = s.charCodeAt(charIndex++);\n            if (charcode < 0x800) {\n                bufview[k] = charcode; // eslint-disable-line security/detect-object-injection\n            }\n            else {\n                bufview[k] = 63; // eslint-disable-line security/detect-object-injection\n            }\n            k++;\n        }\n        return bytes;\n    };\n    Encoding.prototype.getBytesOfUtf8Encoding = function (byteCount, s, charIndex, charCount) {\n        var bytes = new ArrayBuffer(byteCount);\n        var uint = new Uint8Array(bytes);\n        var index = charIndex;\n        var j = 0;\n        for (var i = 0; i < charCount; i++) {\n            var charcode = s.charCodeAt(index);\n            if (charcode <= 0x7F) { // 1 byte character 2^7\n                uint[j] = charcode; // eslint-disable-line security/detect-object-injection\n            }\n            else if (charcode < 0x800) { // 2 byte character 2^11\n                uint[j] = 0xc0 | (charcode >> 6); // eslint-disable-line security/detect-object-injection\n                uint[++j] = 0x80 | (charcode & 0x3f);\n            }\n            else if ((charcode < 0xd800 || charcode >= 0xe000)) { // 3 byte character 2^16\n                uint[j] = 0xe0 | (charcode >> 12); // eslint-disable-line security/detect-object-injection\n                uint[++j] = 0x80 | ((charcode >> 6) & 0x3f);\n                uint[++j] = 0x80 | (charcode & 0x3f);\n            }\n            else {\n                uint[j] = 0xef; // eslint-disable-line security/detect-object-injection\n                uint[++j] = 0xbf;\n                uint[++j] = 0xbd; // U+FFFE \"replacement character\"\n            }\n            ++j;\n            ++index;\n        }\n        return bytes;\n    };\n    Encoding.prototype.getBytesOfUnicodeEncoding = function (byteCount, s, charIndex, charCount) {\n        var bytes = new ArrayBuffer(byteCount);\n        var uint16 = new Uint16Array(bytes);\n        for (var i = 0; i < charCount; i++) {\n            var charcode = s.charCodeAt(i);\n            uint16[i] = charcode; // eslint-disable-line security/detect-object-injection\n        }\n        return bytes;\n    };\n    Encoding.prototype.getStringOfUtf8Encoding = function (byteCal, index, count) {\n        var j = 0;\n        var i = index;\n        var s = '';\n        for (j; j < count; j++) {\n            var c = byteCal[i++];\n            while (i > byteCal.length) {\n                return s;\n            }\n            if (c > 127) {\n                if (c > 191 && c < 224 && i < count) {\n                    c = (c & 31) << 6 | byteCal[i] & 63; // eslint-disable-line security/detect-object-injection\n                }\n                else if (c > 223 && c < 240 && i < byteCal.byteLength) {\n                    c = (c & 15) << 12 | (byteCal[i] & 63) << 6 | byteCal[++i] & 63; // eslint-disable-line security/detect-object-injection\n                }\n                else if (c > 239 && c < 248 && i < byteCal.byteLength) {\n                    c = (c & 7) << 18 | (byteCal[i] & 63) << 12 | (byteCal[++i] & 63) << 6 | byteCal[++i] & 63; // eslint-disable-line security/detect-object-injection\n                }\n                ++i;\n            }\n            s += String.fromCharCode(c); // 1 byte(ASCII) character\n        }\n        return s;\n    };\n    Encoding.prototype.getStringofUnicodeEncoding = function (byteUni, index, count) {\n        if (count > byteUni.length) {\n            throw new RangeError('ArgumentOutOfRange_Count');\n        }\n        var byte16 = new Uint16Array(count);\n        var out = '';\n        for (var i = 0; i < count && i < byteUni.length; i++) {\n            byte16[i] = byteUni[index++]; // eslint-disable-line security/detect-object-injection\n        }\n        out = String.fromCharCode.apply(null, byte16);\n        return out;\n    };\n    /**\n     * Clears the encoding instance.\n     * @returns {void} Nothing is returned.\n     */\n    Encoding.prototype.destroy = function () {\n        this.emitBOM = undefined;\n        this.encodingType = undefined;\n    };\n    return Encoding;\n}());\nexport { Encoding };\n/**\n * Checks if the object is null or undefined and throws an error if it is.\n * @param {Object} value - The object to check.\n * @param {string} message - The name or description of the argument for error reporting.\n * @returns {void} Nothing is returned; an error is thrown if validation fails.\n * @throws {Error} If the value is null or undefined.\n * @private\n */\nexport function validateNullOrUndefined(value, message) {\n    if (value === null || value === undefined) {\n        throw new Error('ArgumentException: ' + message + ' cannot be null or undefined');\n    }\n}\n","/**\n * Save class provide method to save file\n * ```typescript\n * let blob : Blob = new Blob([''], { type: 'text/plain' });\n * Save.save('fileName.txt',blob);\n */\nvar Save = /** @class */ (function () {\n    /**\n     * Initialize new instance of {save}\n     */\n    function Save() {\n        // tslint:disable\n    }\n    /**\n     * Saves the file with the specified name and sends it to the client browser.\n     * @param {string} fileName - The file name to save.\n     * @param {Blob} buffer - The content to write in the file.\n     * @param {boolean} isMicrosoftBrowser - Specifies whether the browser is Microsoft.\n     * @returns {void} Nothing is returned.\n     */\n    Save.save = function (fileName, buffer) {\n        if (fileName === null || fileName === undefined || fileName === '') {\n            throw new Error('ArgumentException: fileName cannot be undefined, null or empty');\n        }\n        var extension = fileName.substring(fileName.lastIndexOf('.') + 1, fileName.length);\n        var mimeType = this.getMimeType(extension);\n        if (mimeType !== '') {\n            buffer = new Blob([buffer], { type: mimeType });\n        }\n        if (this.isMicrosoftBrowser) {\n            navigator.msSaveBlob(buffer, fileName);\n        }\n        else {\n            var downloadLink = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n            this.saveInternal(fileName, extension, buffer, downloadLink, 'download' in downloadLink);\n        }\n    };\n    Save.saveInternal = function (fileName, extension, buffer, downloadLink, hasDownloadAttribute) {\n        if (hasDownloadAttribute) {\n            downloadLink.download = fileName;\n            var dataUrl_1 = window.URL.createObjectURL(buffer);\n            downloadLink.href = dataUrl_1;\n            var event_1 = document.createEvent('MouseEvent');\n            event_1.initEvent('click', true, true);\n            downloadLink.dispatchEvent(event_1);\n            setTimeout(function () {\n                window.URL.revokeObjectURL(dataUrl_1);\n                dataUrl_1 = undefined;\n            });\n        }\n        else {\n            if (extension !== 'docx' && extension !== 'xlsx') {\n                var url = window.URL.createObjectURL(buffer);\n                var isPopupBlocked = window.open(url, '_blank');\n                if (!isPopupBlocked) {\n                    window.location.href = url;\n                }\n            }\n            else {\n                var reader_1 = new FileReader();\n                reader_1.onloadend = function () {\n                    var isPopupBlocked = window.open(reader_1.result, '_blank');\n                    if (!isPopupBlocked) {\n                        window.location.href = reader_1.result;\n                    }\n                };\n                reader_1.readAsDataURL(buffer);\n            }\n        }\n    };\n    /**\n     * Gets the MIME type for the specified file extension.\n     * @param {string} extension - The file extension to check.\n     * @returns {string} The MIME type corresponding to the given extension.\n     * @private\n     */\n    Save.getMimeType = function (extension) {\n        var mimeType = '';\n        switch (extension) {\n            case 'html':\n                mimeType = 'text/html';\n                break;\n            case 'pdf':\n                mimeType = 'application/pdf';\n                break;\n            case 'docx':\n                mimeType = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\n                break;\n            case 'xlsx':\n                mimeType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n                break;\n            case 'txt':\n                mimeType = 'text/plain';\n                break;\n        }\n        return mimeType;\n    };\n    return Save;\n}());\nexport { Save };\n","import { Save } from './save';\n/**\n * XmlWriter class provide method to create XML data\n */\nvar XmlWriter = /** @class */ (function () {\n    /**\n     * Initialize new instance of {XmlWriter}\n     */\n    function XmlWriter() {\n        this.contentPos = 0;\n        this.bufferText = '';\n        this.bufferBlob = new Blob([''], { type: 'text/plain' });\n        this.currentState = 'Initial';\n        this.namespaceStack = [];\n        this.namespaceStack.push(new Namespace());\n        this.namespaceStack[0].set('xmlns', 'http://www.w3.org/2000/xmlns/', 'Special');\n        this.namespaceStack.push(new Namespace());\n        this.namespaceStack[1].set('xml', 'http://www.w3.org/XML/1998/namespace', 'Special');\n        this.namespaceStack.push(new Namespace());\n        this.namespaceStack[2].set('', '', 'Implied');\n        this.elementStack = [];\n        this.elementStack.push(new XmlElement());\n        this.elementStack[0].set('', '', '', this.namespaceStack.length - 1);\n        this.attributeStack = [];\n        Save.isMicrosoftBrowser = !(!navigator.msSaveBlob);\n    }\n    Object.defineProperty(XmlWriter.prototype, \"buffer\", {\n        /**\n         * Gets the content written to the XmlWriter as a Blob.\n         * @returns {Blob} The Blob containing the written content.\n         */\n        get: function () {\n            this.flush();\n            return this.bufferBlob;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Writes a processing instruction with a space between the name and text.\n     * @param {string} name - The name of the processing instruction.\n     * @param {string} text - The text to write in the processing instruction.\n     * @returns {void} Nothing is returned.\n     * @throws {ArgumentException} If the name is invalid.\n     * @throws {InvalidArgumentException} If the text is invalid.\n     * @throws {InvalidOperationException} If the operation cannot be performed.\n     */\n    XmlWriter.prototype.writeProcessingInstruction = function (name, text) {\n        if (name === undefined || name === null || name.length === 0) {\n            throw new Error('ArgumentException: name should not be undefined, null or empty');\n        }\n        this.checkName(name);\n        if (text === undefined || text === null) {\n            text = '';\n        }\n        if (name.length === 3 && name === 'xml') {\n            if (this.currentState !== 'Initial') {\n                // tslint:disable-next-line:max-line-length\n                throw new Error('InvalidArgumentException: Cannot write XML declaration.WriteStartDocument method has already written it');\n            }\n        }\n        if (this.currentState !== 'Initial' || this.bufferBlob === undefined) {\n            throw new Error('InvalidOperationException: Wrong Token');\n        }\n        else {\n            this.writeStartDocument();\n            this.writeProcessingInstructionInternal(name, text);\n        }\n    };\n    /**\n     * Writes the XML declaration with version and standalone attribute.\n     * @param {boolean} standalone - If true, writes `standalone=\"yes\"`, otherwise `standalone=\"no\"`.\n     * @returns {void} Nothing is returned.\n     * @throws {InvalidOperation} If the XML declaration cannot be written in the current state.\n     */\n    XmlWriter.prototype.writeStartDocument = function (standalone) {\n        if (this.currentState !== 'Initial' || this.bufferBlob === undefined) {\n            throw new Error('InvalidOperationException: Wrong Token');\n        }\n        this.currentState = 'StartDocument';\n        this.rawText('<?xml version=\"1.0\" encoding=\"utf-8');\n        if (standalone !== null && standalone !== undefined) {\n            this.rawText('\" standalone=\"');\n            this.rawText(standalone ? 'yes' : 'no');\n        }\n        this.rawText('\"?>');\n    };\n    /**\n     * Closes any open tag or attribute and writes the state back to start.\n     *\n     * @returns {void} This function does not return a value.\n     */\n    XmlWriter.prototype.writeEndDocument = function () {\n        while (this.elementStack.length - 1 > 0) {\n            this.writeEndElement();\n        }\n        this.currentState = 'EndDocument';\n        this.flush();\n    };\n    /**\n     * Writes the specified start tag and associates it with the given namespace and prefix.\n     * @param {string} prefix - The namespace prefix of the element.\n     * @param {string} localName - The local name of the element.\n     * @param {string} namespace - The namespace URI associated with the element.\n     * @returns {void} Nothing is returned.\n     * @throws {ArgumentException} If any argument is invalid.\n     * @throws {InvalidOperationException} If the operation cannot be performed in the current state.\n     */\n    XmlWriter.prototype.writeStartElement = function (prefix, localName, namespace) {\n        if (this.bufferBlob === undefined) {\n            throw new Error('InvalidOperationException: Wrong Token');\n        }\n        if (localName === undefined || localName === null || localName.length === 0) {\n            throw new Error('ArgumentException: localName cannot be undefined, null or empty');\n        }\n        this.checkName(localName);\n        if (this.currentState === 'Initial') {\n            this.writeStartDocument();\n        }\n        if (this.currentState === 'StartElement') {\n            this.startElementContent();\n        }\n        this.currentState = 'StartElement';\n        if (prefix === undefined || prefix === null) {\n            if (namespace !== undefined && namespace !== null) {\n                prefix = this.lookupPrefix(namespace);\n            }\n            if (prefix === undefined || prefix === null) {\n                prefix = '';\n            }\n        }\n        else if (prefix.length > 0) {\n            if (namespace === undefined || namespace === null) {\n                namespace = this.lookupNamespace(prefix);\n            }\n            if (namespace === undefined || namespace === null || (namespace !== undefined && namespace.length === 0)) {\n                throw new Error('ArgumentException: Cannot use a prefix with an empty namespace');\n            }\n        }\n        if (namespace === undefined || namespace === null) {\n            namespace = this.lookupNamespace(prefix);\n        }\n        this.writeStartElementInternal(prefix, localName, namespace);\n    };\n    /**\n     * Closes one element and pops the corresponding namespace scope.\n     * @returns {void} Nothing is returned.\n     */\n    XmlWriter.prototype.writeEndElement = function () {\n        if (this.currentState === 'StartElement') {\n            this.startElementContent();\n            this.currentState = 'ElementContent';\n        }\n        else if (this.currentState === 'ElementContent') {\n            this.currentState = 'ElementContent';\n        }\n        this.currentState = 'EndElement';\n        var top = this.elementStack.length - 1;\n        this.writeEndElementInternal(this.elementStack[top].prefix, this.elementStack[top].localName); // eslint-disable-line security/detect-object-injection\n        this.namespaceStack.splice(this.elementStack[top].previousTop + 1); // eslint-disable-line security/detect-object-injection\n        this.elementStack.splice(top);\n        if (this.bufferText.length > 10240) {\n            this.flush();\n        }\n    };\n    /**\n     * Writes an element with the specified prefix, local name, namespace URI, and value.\n     * @param {string} prefix - The namespace prefix of the element.\n     * @param {string} localName - The local name of the element.\n     * @param {string} namespace - The namespace URI associated with the element.\n     * @param {string} value - The value of the element.\n     * @returns {void} Nothing is returned.\n     */\n    XmlWriter.prototype.writeElementString = function (prefix, localName, namespace, value) {\n        this.writeStartElement(prefix, localName, namespace);\n        if (value !== undefined && value !== null && value.length !== 0) {\n            this.writeString(value);\n        }\n        this.writeEndElement();\n    };\n    /**\n     * Writes out the attribute with the specified prefix, local name, namespace URI, and value.\n     * @param {string} prefix - Namespace prefix of element.\n     * @param {string} localName - Local name of element.\n     * @param {string} namespace - Namespace URI associated with element.\n     * @param {string} value - Value of element.\n     * @returns {void} This function does not return a value.\n     */\n    XmlWriter.prototype.writeAttributeString = function (prefix, localName, namespace, value) {\n        this.writeStartAttribute(prefix, localName, namespace, value);\n        this.writeStringInternal(value, true);\n        this.writeEndAttribute();\n    };\n    /**\n     * Writes the given text content.\n     * @param {string} text - Text to write.\n     * @throws {InvalidOperationException} If the operation is invalid.\n     * @returns {void} This function does not return a value.\n     */\n    XmlWriter.prototype.writeString = function (text) {\n        this.writeInternal(text, false);\n    };\n    /**\n     * Write given text as raw data.\n     * @param {string} text - Text to write.\n     * @throws {InvalidOperationException} If the operation is invalid.\n     * @returns {void} This function does not return a value.\n     */\n    XmlWriter.prototype.writeRaw = function (text) {\n        this.writeInternal(text, true);\n    };\n    XmlWriter.prototype.writeInternal = function (text, isRawString) {\n        if (text === undefined || text === null) {\n            return;\n        }\n        else {\n            if (this.currentState !== 'StartElement' && this.currentState !== 'ElementContent') {\n                throw new Error('InvalidOperationException: Wrong Token');\n            }\n            if (this.currentState === 'StartElement') {\n                this.startElementContent();\n            }\n            this.currentState = 'ElementContent';\n            if (isRawString) {\n                this.rawText(text);\n            }\n            else {\n                this.writeStringInternal(text, false);\n            }\n        }\n    };\n    /**\n     * Saves the file with the specified name and sends the file to the client browser.\n     * @param {string} fileName - File name.\n     * @returns {void} This function does not return a value.\n     */\n    XmlWriter.prototype.save = function (fileName) {\n        while (this.elementStack.length - 1 > 0) {\n            this.writeEndElement();\n        }\n        if (this.bufferText !== '') {\n            this.flush();\n        }\n        Save.save(fileName, this.buffer);\n    };\n    /**\n     * Releases the resources used by XmlWriter.\n     * @returns {void} This function does not return a value.\n     */\n    XmlWriter.prototype.destroy = function () {\n        this.bufferBlob = undefined;\n        for (var _i = 0, _a = this.namespaceStack; _i < _a.length; _i++) {\n            var ns = _a[_i];\n            ns.destroy();\n        }\n        this.namespaceStack = [];\n        for (var _b = 0, _c = this.elementStack; _b < _c.length; _b++) {\n            var el = _c[_b];\n            el.destroy();\n        }\n        this.elementStack = [];\n        this.bufferText = '';\n        this.contentPos = 0;\n    };\n    XmlWriter.prototype.flush = function () {\n        if (this.bufferBlob === undefined) {\n            return;\n        }\n        this.bufferBlob = new Blob([this.bufferBlob, this.bufferText], { type: 'text/plain' });\n        this.bufferText = '';\n    };\n    XmlWriter.prototype.writeProcessingInstructionInternal = function (name, text) {\n        this.bufferText += '<?';\n        this.rawText(name);\n        if (text.length > 0) {\n            this.bufferText += ' ';\n            text = text.replace(/\\?\\>/g, '? >'); // eslint-disable-line no-useless-escape\n            this.bufferText += text;\n        }\n        this.bufferText += '?';\n        this.bufferText += '>';\n    };\n    XmlWriter.prototype.writeStartAttribute = function (prefix, localName, namespace, value) {\n        if (localName === undefined || localName === null || localName.length === 0) {\n            if (prefix === 'xmlns') {\n                localName = 'xmlns';\n                prefix = '';\n            }\n            else {\n                throw new Error('ArgumentException: localName cannot be undefined, null or empty');\n            }\n        }\n        if (this.currentState !== 'StartElement') {\n            throw new Error('InvalidOperationException: Wrong Token');\n        }\n        this.checkName(localName);\n        this.writeStartAttributePrefixAndNameSpace(prefix, localName, namespace, value);\n    };\n    XmlWriter.prototype.writeStartAttributePrefixAndNameSpace = function (prefix, localName, namespace, value) {\n        if (prefix === undefined || prefix === null) {\n            if (namespace !== undefined && namespace !== null) {\n                if (!(localName === 'xmlns' && namespace === 'http://www.w3.org/2000/xmlns/')) {\n                    prefix = this.lookupPrefix(namespace);\n                }\n            }\n            if (prefix === undefined || prefix === null) {\n                prefix = '';\n            }\n        }\n        if (namespace === undefined || namespace === null) {\n            if (prefix !== undefined && prefix !== null && prefix.length > 0) {\n                namespace = this.lookupNamespace(prefix);\n            }\n            if (namespace === undefined || namespace === null) {\n                namespace = '';\n            }\n        }\n        this.writeStartAttributeSpecialAttribute(prefix, localName, namespace, value);\n    };\n    XmlWriter.prototype.writeStartAttributeSpecialAttribute = function (prefix, localName, namespace, value) {\n        if (prefix.length === 0) {\n            if (localName[0] === 'x' && localName === 'xmlns') {\n                this.skipPushAndWrite(prefix, localName, namespace);\n                this.pushNamespaceExplicit('', value);\n                return;\n            }\n            else if (namespace.length > 0) {\n                prefix = this.lookupPrefix(namespace);\n            }\n        }\n        else {\n            if (prefix[0] === 'x') {\n                if (prefix === 'xmlns') {\n                    this.skipPushAndWrite(prefix, localName, namespace);\n                    this.pushNamespaceExplicit(localName, value);\n                    return;\n                }\n                else if (prefix === 'xml') {\n                    if (localName === 'space' || localName === 'lang') {\n                        this.skipPushAndWrite(prefix, localName, namespace);\n                        return;\n                    }\n                }\n            }\n            if (namespace.length === 0) {\n                prefix = '';\n            }\n        }\n        if (prefix !== undefined && prefix !== null && prefix.length !== 0) {\n            this.pushNamespaceImplicit(prefix, namespace);\n        }\n        this.skipPushAndWrite(prefix, localName, namespace);\n    };\n    XmlWriter.prototype.writeEndAttribute = function () {\n        this.currentState = 'StartElement';\n        this.bufferText += '\"';\n    };\n    XmlWriter.prototype.writeStartElementInternal = function (prefix, localName, namespace) {\n        this.bufferText += '<';\n        if (prefix.length > 0) {\n            this.rawText(prefix);\n            this.bufferText += ':';\n        }\n        this.rawText(localName);\n        var top = this.elementStack.length;\n        this.elementStack.push(new XmlElement());\n        this.elementStack[top].set(prefix, localName, namespace, this.namespaceStack.length - 1); // eslint-disable-line security/detect-object-injection\n        this.pushNamespaceImplicit(prefix, namespace);\n        for (var _i = 0, _a = this.attributeStack; _i < _a.length; _i++) {\n            var attr = _a[_i];\n            attr.destroy();\n        }\n        this.attributeStack = [];\n    };\n    XmlWriter.prototype.writeEndElementInternal = function (prefix, localName) {\n        if (this.contentPos !== this.bufferText.length + 1) {\n            this.bufferText += '</';\n            if (prefix !== undefined && prefix !== null && prefix.length !== 0) {\n                this.rawText(prefix);\n                this.bufferText += ':';\n            }\n            this.rawText(localName);\n            this.bufferText += '>';\n        }\n        else {\n            this.bufferText = this.bufferText.substring(0, this.bufferText.length - 1);\n            this.bufferText += ' />';\n        }\n    };\n    XmlWriter.prototype.writeStartAttributeInternal = function (prefix, localName, namespaceName) {\n        this.bufferText += ' ';\n        if (prefix !== undefined && prefix !== null && prefix.length > 0) {\n            this.rawText(prefix);\n            this.bufferText += ':';\n        }\n        this.rawText(localName);\n        this.bufferText += '=';\n        this.bufferText += '\"';\n    };\n    XmlWriter.prototype.writeNamespaceDeclaration = function (prefix, namespaceUri) {\n        this.writeStartNamespaceDeclaration(prefix);\n        this.writeStringInternal(namespaceUri, true);\n        this.bufferText += '\"';\n    };\n    XmlWriter.prototype.writeStartNamespaceDeclaration = function (prefix) {\n        if (prefix === undefined || prefix === null || prefix.length === 0) {\n            this.rawText(' xmlns=\\\"'); // eslint-disable-line no-useless-escape\n        }\n        else {\n            this.rawText(' xmlns:');\n            this.rawText(prefix);\n            this.bufferText += '=';\n            this.bufferText += '\"';\n        }\n    };\n    XmlWriter.prototype.writeStringInternal = function (text, inAttributeValue) {\n        if (text === null || text === undefined) {\n            text = '';\n        }\n        var tempText = '';\n        text = text.replace(/\\&/g, '&amp;'); // eslint-disable-line no-useless-escape\n        text = text.replace(/\\</g, '&lt;'); // eslint-disable-line no-useless-escape\n        text = text.replace(/\\>/g, '&gt;'); // eslint-disable-line no-useless-escape\n        if (inAttributeValue) {\n            text = text.replace(/\\\"/g, '&quot;'); // eslint-disable-line no-useless-escape\n        }\n        this.bufferText += text;\n        if (!inAttributeValue) {\n            this.contentPos = 0;\n        }\n    };\n    XmlWriter.prototype.startElementContent = function () {\n        var start = this.elementStack[this.elementStack.length - 1].previousTop;\n        for (var i = this.namespaceStack.length - 1; i > start; i--) {\n            if (this.namespaceStack[i].kind === 'NeedToWrite') { // eslint-disable-line security/detect-object-injection\n                this.writeNamespaceDeclaration(this.namespaceStack[i].prefix, this.namespaceStack[i].namespaceUri); // eslint-disable-line security/detect-object-injection\n            }\n        }\n        this.bufferText += '>';\n        this.contentPos = this.bufferText.length + 1;\n    };\n    XmlWriter.prototype.rawText = function (text) {\n        this.bufferText += text;\n    };\n    XmlWriter.prototype.addNamespace = function (prefix, ns, kind) {\n        var top = this.namespaceStack.length;\n        this.namespaceStack.push(new Namespace());\n        this.namespaceStack[top].set(prefix, ns, kind); // eslint-disable-line security/detect-object-injection\n    };\n    XmlWriter.prototype.lookupPrefix = function (namespace) {\n        for (var i = this.namespaceStack.length - 1; i >= 0; i--) {\n            if (this.namespaceStack[i].namespaceUri === namespace) { // eslint-disable-line security/detect-object-injection\n                return this.namespaceStack[i].prefix; // eslint-disable-line security/detect-object-injection\n            }\n        }\n        return undefined;\n    };\n    XmlWriter.prototype.lookupNamespace = function (prefix) {\n        for (var i = this.namespaceStack.length - 1; i >= 0; i--) {\n            if (this.namespaceStack[i].prefix === prefix) { // eslint-disable-line security/detect-object-injection\n                return this.namespaceStack[i].namespaceUri; // eslint-disable-line security/detect-object-injection\n            }\n        }\n        return undefined;\n    };\n    XmlWriter.prototype.lookupNamespaceIndex = function (prefix) {\n        for (var i = this.namespaceStack.length - 1; i >= 0; i--) {\n            if (this.namespaceStack[i].prefix === prefix) { // eslint-disable-line security/detect-object-injection\n                return i;\n            }\n        }\n        return -1;\n    };\n    XmlWriter.prototype.pushNamespaceImplicit = function (prefix, ns) {\n        var kind;\n        var existingNsIndex = this.lookupNamespaceIndex(prefix);\n        if (existingNsIndex !== -1) {\n            if (existingNsIndex > this.elementStack[this.elementStack.length - 1].previousTop) {\n                if (this.namespaceStack[existingNsIndex].namespaceUri !== ns) { // eslint-disable-line security/detect-object-injection\n                    throw new Error('XmlException namespace Uri needs to be the same as the one that is already declared');\n                }\n                return;\n            }\n            else {\n                if (this.namespaceStack[existingNsIndex].kind === 'Special') { // eslint-disable-line security/detect-object-injection\n                    if (prefix === 'xml') {\n                        if (ns !== this.namespaceStack[existingNsIndex].namespaceUri) { // eslint-disable-line security/detect-object-injection\n                            throw new Error('InvalidArgumentException: Xml String');\n                        }\n                        else {\n                            kind = 'Implied';\n                        }\n                    }\n                    else {\n                        throw new Error('InvalidArgumentException: Prefix \"xmlns\" is reserved for use by XML.');\n                    }\n                }\n                else {\n                    kind = (this.namespaceStack[existingNsIndex].namespaceUri === ns) ? 'Implied' : 'NeedToWrite'; // eslint-disable-line security/detect-object-injection\n                }\n            }\n        }\n        else {\n            if ((ns === 'http://www.w3.org/XML/1998/namespace' && prefix !== 'xml') ||\n                (ns === 'http://www.w3.org/2000/xmlns/' && prefix !== 'xmlns')) {\n                throw new Error('InvalidArgumentException');\n            }\n            kind = 'NeedToWrite';\n        }\n        this.addNamespace(prefix, ns, kind);\n    };\n    XmlWriter.prototype.pushNamespaceExplicit = function (prefix, ns) {\n        var existingNsIndex = this.lookupNamespaceIndex(prefix);\n        if (existingNsIndex !== -1) {\n            if (existingNsIndex > this.elementStack[this.elementStack.length - 1].previousTop) {\n                this.namespaceStack[existingNsIndex].kind = 'Written'; // eslint-disable-line security/detect-object-injection\n                return;\n            }\n        }\n        this.addNamespace(prefix, ns, 'Written');\n        return;\n    };\n    XmlWriter.prototype.addAttribute = function (prefix, localName, namespaceName) {\n        var top = this.attributeStack.length;\n        this.attributeStack.push(new XmlAttribute());\n        this.attributeStack[top].set(prefix, localName, namespaceName); // eslint-disable-line security/detect-object-injection\n        for (var i = 0; i < top; i++) {\n            if (this.attributeStack[i].isDuplicate(prefix, localName, namespaceName)) { // eslint-disable-line security/detect-object-injection\n                throw new Error('XmlException: duplicate attribute name');\n            }\n        }\n    };\n    XmlWriter.prototype.skipPushAndWrite = function (prefix, localName, namespace) {\n        this.addAttribute(prefix, localName, namespace);\n        this.writeStartAttributeInternal(prefix, localName, namespace);\n    };\n    XmlWriter.prototype.checkName = function (text) {\n        var format = /[ !@#$%^&*()+\\=\\[\\]{};':\"\\\\|,<>\\/?]/; // eslint-disable-line no-useless-escape\n        if (format.test(text)) {\n            throw new Error('InvalidArgumentException: invalid name character');\n        }\n    };\n    return XmlWriter;\n}());\nexport { XmlWriter };\n/**\n * class for managing namespace collection\n */\nvar Namespace = /** @class */ (function () {\n    function Namespace() {\n    }\n    /**\n     * Sets value for the current namespace instance.\n     * @param {string} prefix - Namespace prefix.\n     * @param {string} namespaceUri - Namespace URI.\n     * @param {string} kind - Namespace kind.\n     * @returns {void} This function does not return a value.\n     */\n    Namespace.prototype.set = function (prefix, namespaceUri, kind) {\n        this.prefix = prefix;\n        this.namespaceUri = namespaceUri;\n        this.kind = kind;\n    };\n    /**\n     * Releases the resources used by Namespace.\n     * @returns {void} This function does not return a value.\n     */\n    Namespace.prototype.destroy = function () {\n        this.prefix = undefined;\n        this.namespaceUri = undefined;\n        this.kind = undefined;\n    };\n    return Namespace;\n}());\nexport { Namespace };\n/**\n * class for managing element collection\n */\nvar XmlElement = /** @class */ (function () {\n    function XmlElement() {\n    }\n    /**\n     * Sets the value of the current element.\n     * @param {string} prefix - Element prefix.\n     * @param {string} localName - Element local name.\n     * @param {string} namespaceUri - Namespace URI.\n     * @param {string} previousTop - Previous namespace top.\n     * @returns {void} This function does not return a value.\n     */\n    XmlElement.prototype.set = function (prefix, localName, namespaceUri, previousTop) {\n        this.previousTop = previousTop;\n        this.prefix = prefix;\n        this.namespaceUri = namespaceUri;\n        this.localName = localName;\n    };\n    /**\n     * Releases the resources used by XmlElement.\n     * @returns {void} This function does not return a value.\n     */\n    XmlElement.prototype.destroy = function () {\n        this.previousTop = undefined;\n        this.prefix = undefined;\n        this.localName = undefined;\n        this.namespaceUri = undefined;\n    };\n    return XmlElement;\n}());\nexport { XmlElement };\n/**\n * class for managing attribute collection\n */\nvar XmlAttribute = /** @class */ (function () {\n    function XmlAttribute() {\n    }\n    /**\n     * Sets the value of the current attribute.\n     * @param {string} prefix - Namespace prefix.\n     * @param {string} localName - Attribute local name.\n     * @param {string} namespaceUri - Namespace URI.\n     * @returns {void} This function does not return a value.\n     */\n    XmlAttribute.prototype.set = function (prefix, localName, namespaceUri) {\n        this.prefix = prefix;\n        this.namespaceUri = namespaceUri;\n        this.localName = localName;\n    };\n    /**\n     * Gets whether the attribute is duplicate or not.\n     * @param {string} prefix - Namespace prefix.\n     * @param {string} localName - Attribute local name.\n     * @param {string} namespaceUri - Namespace URI.\n     * @returns {boolean} True if the attribute is duplicate; otherwise, false.\n     */\n    XmlAttribute.prototype.isDuplicate = function (prefix, localName, namespaceUri) {\n        return ((this.localName === localName) && ((this.prefix === prefix) || (this.namespaceUri === namespaceUri)));\n    };\n    /**\n     * Releases the resources used by XmlAttribute\n     * @returns {void}\n     */\n    XmlAttribute.prototype.destroy = function () {\n        this.prefix = undefined;\n        this.namespaceUri = undefined;\n        this.localName = undefined;\n    };\n    return XmlAttribute;\n}());\nexport { XmlAttribute };\n","import { Encoding, validateNullOrUndefined } from './encoding';\nimport { Save } from './save';\n/**\n * StreamWriter class contains the implementation for writing characters to a file in a particular encoding\n * ```typescript\n * let writer = new StreamWriter();\n * writer.write('Hello World');\n * writer.save('Sample.txt');\n * writer.dispose();\n * ```\n */\nvar StreamWriter = /** @class */ (function () {\n    /**\n     * Initializes a new instance of the StreamWriter class by using the specified encoding.\n     * @param {Encoding} [encoding] - The character encoding to use.\n     */\n    function StreamWriter(encoding) {\n        this.bufferBlob = new Blob(['']);\n        this.bufferText = '';\n        this.init(encoding);\n        Save.isMicrosoftBrowser = !(!navigator.msSaveBlob);\n    }\n    Object.defineProperty(StreamWriter.prototype, \"buffer\", {\n        /**\n         * Gets the content written to the StreamWriter as a Blob.\n         * @returns {Blob} The Blob containing the written content.\n         */\n        get: function () {\n            this.flush();\n            return this.bufferBlob;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(StreamWriter.prototype, \"encoding\", {\n        /**\n         * Gets the encoding.\n         * @returns {Encoding} The current encoding instance.\n         */\n        get: function () {\n            return this.enc;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    StreamWriter.prototype.init = function (encoding) {\n        if (encoding === null || encoding === undefined) {\n            this.enc = new Encoding(false);\n            this.enc.type = 'Utf8';\n        }\n        else {\n            this.enc = encoding;\n            this.setBomByte();\n        }\n    };\n    /**\n     * Sets the Byte Order Mark (BOM) value based on the EncodingType.\n     * @returns {void} Nothing is returned.\n     * @private\n     */\n    StreamWriter.prototype.setBomByte = function () {\n        if (this.encoding.includeBom) {\n            switch (this.encoding.type) {\n                case 'Unicode': {\n                    var arrayUnicode = new ArrayBuffer(2);\n                    var uint8 = new Uint8Array(arrayUnicode);\n                    uint8[0] = 255;\n                    uint8[1] = 254;\n                    this.bufferBlob = new Blob([arrayUnicode]);\n                    break;\n                }\n                case 'Utf8': {\n                    var arrayUtf8 = new ArrayBuffer(3);\n                    var utf8 = new Uint8Array(arrayUtf8);\n                    utf8[0] = 239;\n                    utf8[1] = 187;\n                    utf8[2] = 191;\n                    this.bufferBlob = new Blob([arrayUtf8]);\n                    break;\n                }\n                default: {\n                    this.bufferBlob = new Blob(['']);\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * Saves the file with specified name and sends the file to client browser\n     * @param  {string} fileName - The file name to save\n     * @returns {void}\n     */\n    StreamWriter.prototype.save = function (fileName) {\n        if (this.bufferText !== '') {\n            this.flush();\n        }\n        Save.save(fileName, this.buffer);\n    };\n    /**\n     * Writes the specified string.\n     * @param  {string} value - The string to write. If value is null or undefined, nothing is written.\n     * @returns {void}\n     */\n    StreamWriter.prototype.write = function (value) {\n        if (this.encoding === undefined) {\n            throw new Error('Object Disposed Exception: current writer is disposed');\n        }\n        validateNullOrUndefined(value, 'string');\n        this.bufferText += value;\n        if (this.bufferText.length >= 10240) {\n            this.flush();\n        }\n    };\n    StreamWriter.prototype.flush = function () {\n        if (this.bufferText === undefined || this.bufferText === null || this.bufferText.length === 0) {\n            return;\n        }\n        var bufferArray = this.encoding.getBytes(this.bufferText, 0, this.bufferText.length);\n        this.bufferText = '';\n        this.bufferBlob = new Blob([this.bufferBlob, bufferArray]);\n    };\n    /**\n     * Writes the specified string followed by a line terminator\n     * @param  {string} value - The string to write. If value is null or undefined, nothing is written\n     * @returns {void}\n     */\n    StreamWriter.prototype.writeLine = function (value) {\n        if (this.encoding === undefined) {\n            throw new Error('Object Disposed Exception: current writer is disposed');\n        }\n        validateNullOrUndefined(value, 'string');\n        this.bufferText = this.bufferText + value + '\\r\\n';\n        if (this.bufferText.length >= 10240) {\n            this.flush();\n        }\n    };\n    /**\n     * Releases the resources used by the StreamWriter\n     * @returns {void}\n     */\n    StreamWriter.prototype.destroy = function () {\n        this.bufferBlob = undefined;\n        this.bufferText = undefined;\n        if (this.enc instanceof Encoding) {\n            this.enc.destroy();\n        }\n        this.enc = undefined;\n    };\n    return StreamWriter;\n}());\nexport { StreamWriter };\n"],"names":["validateNullOrUndefined","value","message","undefined","Error","Save","save","fileName","buffer","extension","substring","lastIndexOf","length","mimeType","this","getMimeType","Blob","type","isMicrosoftBrowser","navigator","msSaveBlob","downloadLink","document","createElementNS","saveInternal","hasDownloadAttribute","download","dataUrl_1","window","URL","createObjectURL","href","event_1","createEvent","initEvent","dispatchEvent","setTimeout","revokeObjectURL","url","open","location","reader_1","FileReader","onloadend","result","readAsDataURL","XmlWriter","contentPos","bufferText","bufferBlob","currentState","namespaceStack","push","Namespace","set","elementStack","XmlElement","attributeStack","Object","defineProperty","prototype","get","flush","enumerable","configurable","writeProcessingInstruction","name","text","checkName","writeStartDocument","writeProcessingInstructionInternal","standalone","rawText","writeEndDocument","writeEndElement","writeStartElement","prefix","localName","namespace","startElementContent","lookupPrefix","lookupNamespace","writeStartElementInternal","top","writeEndElementInternal","splice","previousTop","writeElementString","writeString","writeAttributeString","writeStartAttribute","writeStringInternal","writeEndAttribute","writeInternal","writeRaw","isRawString","destroy","_i","_a","_b","_c","replace","writeStartAttributePrefixAndNameSpace","writeStartAttributeSpecialAttribute","skipPushAndWrite","pushNamespaceExplicit","pushNamespaceImplicit","writeStartAttributeInternal","namespaceName","writeNamespaceDeclaration","namespaceUri","writeStartNamespaceDeclaration","inAttributeValue","start","i","kind","addNamespace","ns","lookupNamespaceIndex","existingNsIndex","addAttribute","XmlAttribute","isDuplicate","test","Encoding","includeBom","emitBOM","encodingType","initBOM","getByteCount","chars","utf8Len","charCodeAt","getByteCountInternal","codePoint","isHighSurrogate","codeUnit","toCodepoint","highCodeUnit","lowCodeUnit","charIndex","charCount","byteCount","isUtf8","charCode","high","low","getBytes","s","RangeError","ArrayBuffer","getBytesOfUtf8Encoding","getBytesOfUnicodeEncoding","getBytesOfAnsiEncoding","getString","bytes","index","count","byteLength","out","byteCal","Uint8Array","getStringOfUtf8Encoding","byteUnicode","Uint16Array","getStringofUnicodeEncoding","j","arr","c","String","fromCharCode","bufview","k","charcode","uint","uint16","byteUni","byte16","apply","StreamWriter","encoding","init","enc","setBomByte","arrayUnicode","uint8","arrayUtf8","utf8","write","bufferArray","writeLine"],"mappings":"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"}